## ç½‘é¡µæ•°æ®çˆ¬å–,ä¸å®šæœŸæ›´æ–°
### ä¸€.[ğŸ‡¨ğŸ‡³ä¸­å›½åŸå¸‚æ•°æ®çˆ¬å–(äº”çº§è”åŠ¨)](src/main/java/com/mocaris/ChineseCityParser.kt)
åŒæ­¥[giteeé“¾æ¥](https://gitee.com/Mocaris/htmlparser)  
åŒæ­¥[githubé“¾æ¥](https://github.com/Mocaris/htmlparser)  
å‚è€ƒ  
 ### ChineseCityParser
```kotlin
        fun main(args: Array<String>) {
            val proxyParser = ProxyParser()
            proxyParser.listener = object : ParseHtmlListener<ProxyIp> {
                override fun onSuccess(ipProxys: MutableList<ProxyIp>) {
                    IP_PROXYS = ipProxys
                    println("ä»£ç†ip:\n${ipProxys.toString()}")
                    val parser = ChineseCityParser()
                    parser.parseProvinceHtml()
                }

                override fun onFailed(erMsg: String) {
                    threadExecutor.execute(proxyParser)
                }

            }
            threadExecutor.execute(proxyParser)
        }
```
æ•°æ®æ ¼å¼ å¯¼å‡ºå¯è‡ªè¡Œä¿®æ”¹
```kotlin
fun writeFile(parent: CityModel?, models: List<CityModel>?) {
        models ?: return
//        threadExecutor.execute {
        synchronized(this::class.java) {
            val file = File("city_log.txt")
            if (!file.exists()) {
                file.createNewFile()
            }
            if (file.length() <= 0) {
                outputStream.write("æ–°å»ºè¡¨å tb_cities å¯ç›´æ¥å¤åˆ¶ç²˜è´´ä¸‹é¢ sql è¯­å¥æ‰§è¡Œ\n".toByteArray(Charsets.UTF_8))
                outputStream.write(
                    "CREATE TABLE tb_cities (_id INTEGER PRIMARY KEY AUTOINCREMENT,parent_code TEXT,name TEXT,statistics_code TEXT,classification_code TEXT)\n".toByteArray(
                        Charsets.UTF_8
                    )
                )
                outputStream.write(
                    "INSERT INTO tb_cities (parent_code,name,statistics_code,classification_code) VALUES \n".toByteArray(
                        Charsets.UTF_8
                    )
                )
                outputStream.flush()
            }
            val sqlStr = StringBuilder()
            for (city in models) {
                sqlStr.append(" ('${city.parent_code}','${city.name}','${city.statistics_code}','${city.classification_code}')")
                sqlStr.append(",\n")
            }
            val sql = sqlStr.toString()
            outputStream.write(sql.toByteArray(Charsets.UTF_8))
            outputStream.flush()
            println(sql)
        }
//        }
    }

```